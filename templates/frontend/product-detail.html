{% extends 'frontend/base.html' %}
{% load static %}
{% block content %}


{% block stylesheets %}
<style>
	/* New rating and comment container styles */
.rate-product-container {
    margin-top: 20px;
    padding: 15px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.rate-product-container .rate-header {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 15px;
    color: #333;
}

.rate-product-container .rating {
    margin-bottom: 15px;
}

.rate-product-container .fa {
    font-size: 24px;
    margin-right: 10px;
    color: #ddd; /* Inactive star color */
    cursor: pointer;
    transition: color 0.3s ease;
}

.rate-product-container .fa:hover {
    color: #ffc107; /* Hovered star color */
}

.rate-product-container .comment-input {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.rate-product-container .submit-btn {
    background-color: #007bff;
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s ease;
}

.rate-product-container .submit-btn:hover {
    background-color: #0056b3;
}

/* Custom styles for the review container */
.review-container {
    border: 1px solid #e0e0e0;
    padding: 15px;
    margin-top: 15px;
    border-radius: 8px;
    background-color: #f9f9f9;
}

.user-info {
    font-weight: bold;
    color: #333;
}

.rating {
    margin-top: 10px;
}

.rating .fa {
    font-size: 16px;
    color: #ffd700;
    margin-right: 3px;
}

.comment {
    margin-top: 10px;
    color: #555;
}

.pagination a {
    display: inline-block;
    margin-right: 5px; /* Adjust as needed for spacing between links */
}

/* Add this to your CSS file */
.pagination-link {
    margin-left: 10px; /* Adjust the value as needed for your desired padding */
}

.pagination {
    margin-right: 0px;
    margin-left: 0px;
    margin-top: 10px;
}

/* Container for star ratings */
.rate-product-container .rating-group {
    display: inline-flex;
}

/* Hide radio inputs */
.rate-product-container .rating__input {
    position: absolute !important;
    left: -9999px !important;
}

/* Style for star labels */
.rate-product-container .rating__label {
    cursor: pointer;
    padding: 0 0.1em;
    font-size: 2rem;
}

/* Default star color */
.rate-product-container .rating__icon--star {
    color: #ddd; /* Default color for empty star */
}

/* Checked star color */
.rate-product-container .rating__input:checked ~ .rating__label .rating__icon--star {
    color: gold; /* Color for filled star */
}

/* Unchecked star color (white) */
.rate-product-container .rating__label .rating__icon--star {
    color: white;
}

/* Hover effect: all stars orange on rating group hover */
.rate-product-container .rating-group:hover .rating__label .rating__icon--star {
    color: orange;
}

/* Hover effect: hovered input's following siblings grey on hover */
.rate-product-container .rating__input:hover ~ .rating__label .rating__icon--star {
    color: #ddd;
}

</style>


{% endblock stylesheets %}
	<!-- breadcrumb -->
	<div class="bread-crumb bgwhite flex-w p-l-52 p-r-15 p-t-30 p-l-15-sm">
		<a href="/" class="s-text16">
			Home
			<i class="fa fa-angle-right m-l-8 m-r-9" aria-hidden="true"></i>
		</a>

		<a href="{% url 'frontend:category' object.category.slug %}" class="s-text16">
			{{ object.category }}
			<i class="fa fa-angle-right m-l-8 m-r-9" aria-hidden="true"></i>
		</a>

		<span class="s-text17">
			{{object.name}}
		</span>
	</div>

	<!-- Product Detail -->
	<div class="container bgwhite">
		<div class="flex-w flex-sb">
			<div class="w-size14 p-t-30 respon5" >
				<div class="wrap-slick3 flex-sb flex-w">
					<div class="wrap-slick3-dots"></div>

					<div class="slick3">
						{% for image in object.images.all %}
							<div class="item-slick3" data-thumb="{{ image.image.url }}">
								<div class="wrap-pic-w">
									<img src="{{ image.image.url }}" alt="{{ image.name }}">
								</div>
							</div>
						{% endfor %}
					</div>
				</div>
			</div>

			<div class="w-size14 p-t-30 respon5" >
				<h4 class="product-detail-name m-text16 p-b-13">
					{{object.name}}
				</h4>

				
			  	{% if object.discounted_price %}
								<span class="block2-oldprice m-text7 p-r-5" style="font-size: 1.5rem;">
									₹{{ object.price }}
								</span>

								<span class="block2-newprice m-text8 p-r-5" style="font-size: 1.5rem;">
									₹{{ object.discounted_price }}
								</span>
								{% else %}
								<span class="m-text17">
									₹{{object.price}}
								</span>
								{% endif %}

				<p class="s-text8 p-t-10">
					{{ object.name }}
				</p>

				<!--  -->
				<div class="p-t-33 p-b-60">
					<div class="flex-m flex-w p-b-10">
						<div class="s-text15 w-size15 t-center">
							Size
						</div>

						<div class="rs2-select2 rs3-select2 w-size16">
							<select class="form-control" name="size">
								<option>Choose an option</option>
								<option>S</option>
								<option>M</option>
								<option>L</option>
								<option>XL</option>
							</select>
						</div>
					</div>

					<div class="flex-m flex-w">
						<div class="s-text15 w-size15 t-center">
							Color
						</div>

						<div class="rs2-select2 rs3-select2 w-size16">
							<select class="form-control" name="color">
								<option>Choose an option</option>
								<option>Gray</option>
								<option>Red</option>
								<option>Black</option>
								<option>Blue</option>
							</select>
						</div>
					</div>

					<div class="flex-r-m flex-w p-t-10">
						<div class="w-size16 flex-m flex-w">
							<div class="flex-w bo5 of-hidden m-r-22 m-t-10 m-b-10">
								<button class="btn-num-product-down color1 flex-c-m size7 bg8 eff2" {% if order_item and order_item.item.slug %} onclick="handleClick('{% url 'frontend:remove-single-item-from-cart' order_item.item.slug %}')"{% else %} onclick="#"{% endif %}>
									<i class="fs-12 fa fa-minus" aria-hidden="true"></i>
								</button>
								<input class="size8 m-text18 t-center num-product" type="number" name="num-product" {% if order_item %} value="{{order_item.quantity}}" {% else %} value="1" {% endif %}>

								<button class="btn-num-product-up color1 flex-c-m size7 bg8 eff2" {% if request.user.is_authenticated %} onclick="handleClick('{{ object.get_add_to_cart_url }}')"{% else %} onclick="redirectLogin()"{% endif %}>
									<i class="fs-12 fa fa-plus" aria-hidden="true"></i>
								</button>								
							</div>

							
							
							<div class="btn-addcart-product-detail size9 trans-0-4 m-t-10 m-b-10" style="margin-bottom: 20px;">
								<!-- Button -->

								
							
							</div>
							{% if request.user.is_authenticated %}
							
							<a href="{{ object.get_add_to_cart_url }}" class="btn btn-primary" style="margin: 2px;">Add to Cart</a>
							<a href="{{object.get_remove_from_cart_url}}" class="btn btn-outline-dark" style="margin: 2px;">Remove from Cart</a>
							{% else %}
							<a href="{% url 'frontend:auth0-login' %}" class="btn btn-primary" style="margin: 2px;">Login to Add</a>
							{% endif %}
						</div>
					</div>
				</div>
				<br>
				<div class="p-b-45">
					<span class="s-text8 m-r-35">SKU: {{ object.sku }}</span>
					<span class="s-text8">Categories: {{ object.category }}</span>
				</div>

				<!--  -->
				<div class="wrap-dropdown-content bo6 p-t-15 p-b-14 active-dropdown-content">
					<h5 class="js-toggle-dropdown-content flex-sb-m cs-pointer m-text19 color0-hov trans-0-4">
						Description
						<i class="down-mark fs-12 color1 fa fa-minus dis-none" aria-hidden="true"></i>
						<i class="up-mark fs-12 color1 fa fa-plus" aria-hidden="true"></i>
					</h5>

					<div class="dropdown-content dis-none p-t-15 p-b-23">
						<p class="s-text8">
							{{ object.description_short }}
						</p>
					</div>
				</div>

				<div class="wrap-dropdown-content bo7 p-t-15 p-b-14">
					<h5 class="js-toggle-dropdown-content flex-sb-m cs-pointer m-text19 color0-hov trans-0-4">
						Additional information
						<i class="down-mark fs-12 color1 fa fa-minus dis-none" aria-hidden="true"></i>
						<i class="up-mark fs-12 color1 fa fa-plus" aria-hidden="true"></i>
					</h5>

					<div class="dropdown-content dis-none p-t-15 p-b-23">
						<p class="s-text8">
							{{ object.description_long | safe }}
						</p>
					</div>
				</div>

				<div class="wrap-dropdown-content bo7 p-t-15 p-b-14" id="reviews-container">
					<h5 id="reviews-header" class="js-toggle-dropdown-content flex-sb-m cs-pointer m-text19 color0-hov trans-0-4">
						<span id="reviews-count">Reviews (0)</span>
						<i class="down-mark fs-12 color1 fa fa-minus dis-none" aria-hidden="true"></i>
						<i class="up-mark fs-12 color1 fa fa-plus" aria-hidden="true"></i>
					</h5>
					
				
					   
						<div class="dropdown-content dis-none p-t-15 p-b-23" id="reviews-content">
							<!-- Existing reviews go here -->
						</div>
						 
				
					
				
			</div>
		</div>
		</div>
	</div>


	<!-- Relate Product -->
	<section class="relateproduct bgwhite p-t-45 p-b-138">
		<div class="container">
			<div class="sec-title p-b-60">
				<h3 class="m-text5 t-center">
					Related Products
				</h3>
			</div>

			<!-- Slide2 -->
			<div class="wrap-slick2">
				<div class="slick2">
					{% for item in related_items_list %}
					
					{% include 'frontend/product_item.html' %}
					
				
					{% endfor %}

					<div class="item-slick2 p-l-15 p-r-15" hidden="true">
						<!-- Block2 -->
						<div class="block2">
							<div class="block2-img wrap-pic-w of-hidden pos-relative block2-labelnew">
								<img src="{% static 'frontend/images/item-02.webp' %}" alt="IMG-PRODUCT">

								<div class="block2-overlay trans-0-4">
									<a href="#" class="block2-btn-addwishlist hov-pointer trans-0-4">
										<i class="icon-wishlist icon_heart_alt" aria-hidden="true"></i>
										<i class="icon-wishlist icon_heart dis-none" aria-hidden="true"></i>
									</a>

									<div class="block2-btn-addcart w-size1 trans-0-4">
										<!-- Button -->
										<button class="flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4">
											Add to Cart
										</button>
									</div>
								</div>
							</div>

							<div class="block2-txt p-t-20">
								<a href="product-detail.html" class="block2-name dis-block s-text3 p-b-5">
									Herschel supply co 25l
								</a>

								<span class="block2-price m-text6 p-r-5">
									₹75.00
								</span>
							</div>
						</div>
					</div>

					<div class="item-slick2 p-l-15 p-r-15" hidden="true">
						<!-- Block2 -->
						<div class="block2">
							<div class="block2-img wrap-pic-w of-hidden pos-relative">
								<img src="{% static 'frontend/images/item-03.webp' %}" alt="IMG-PRODUCT">

								<div class="block2-overlay trans-0-4">
									<a href="#" class="block2-btn-addwishlist hov-pointer trans-0-4">
										<i class="icon-wishlist icon_heart_alt" aria-hidden="true"></i>
										<i class="icon-wishlist icon_heart dis-none" aria-hidden="true"></i>
									</a>

									<div class="block2-btn-addcart w-size1 trans-0-4">
										<!-- Button -->
										<button class="flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4">
											Add to Cart
										</button>
									</div>
								</div>
							</div>

							<div class="block2-txt p-t-20">
								<a href="product-detail.html" class="block2-name dis-block s-text3 p-b-5">
									Denim jacket blue
								</a>

								<span class="block2-price m-text6 p-r-5">
									₹92.50
								</span>
							</div>
						</div>
					</div>

					<div class="item-slick2 p-l-15 p-r-15" hidden="true">
						<!-- Block2 -->
						<div class="block2">
							<div class="block2-img wrap-pic-w of-hidden pos-relative">
								<img src="{% static 'frontend/images/item-05.webp' %}" alt="IMG-PRODUCT">

								<div class="block2-overlay trans-0-4">
									<a href="#" class="block2-btn-addwishlist hov-pointer trans-0-4">
										<i class="icon-wishlist icon_heart_alt" aria-hidden="true"></i>
										<i class="icon-wishlist icon_heart dis-none" aria-hidden="true"></i>
									</a>

									<div class="block2-btn-addcart w-size1 trans-0-4">
										<!-- Button -->
										<button class="flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4">
											Add to Cart
										</button>
									</div>
								</div>
							</div>

							<div class="block2-txt p-t-20">
								<a href="product-detail.html" class="block2-name dis-block s-text3 p-b-5">
									Coach slim easton black
								</a>

								<span class="block2-price m-text6 p-r-5">
									₹165.90
								</span>
							</div>
						</div>
					</div>

					<div class="item-slick2 p-l-15 p-r-15" hidden="true">
						<!-- Block2 -->
						<div class="block2">
							<div class="block2-img wrap-pic-w of-hidden pos-relative block2-labelsale">
								<img src="{% static 'frontend/images/item-07.webp' %}" alt="IMG-PRODUCT">

								<div class="block2-overlay trans-0-4">
									<a href="#" class="block2-btn-addwishlist hov-pointer trans-0-4">
										<i class="icon-wishlist icon_heart_alt" aria-hidden="true"></i>
										<i class="icon-wishlist icon_heart dis-none" aria-hidden="true"></i>
									</a>

									<div class="block2-btn-addcart w-size1 trans-0-4">
										<!-- Button -->
										<button class="flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4">
											Add to Cart
										</button>
									</div>
								</div>
							</div>

							<div class="block2-txt p-t-20">
								<a href="product-detail.html" class="block2-name dis-block s-text3 p-b-5">
									Frayed denim shorts
								</a>

								<span class="block2-oldprice m-text7 p-r-5">
									₹29.50
								</span>

								<span class="block2-newprice m-text8 p-r-5">
									₹15.90
								</span>
							</div>
						</div>
					</div>

					<div class="item-slick2 p-l-15 p-r-15" hidden="true">
						<!-- Block2 -->
						<div class="block2">
							<div class="block2-img wrap-pic-w of-hidden pos-relative block2-labelnew">
								<img src="{% static 'frontend/images/item-02.webp' %}" alt="IMG-PRODUCT">

								<div class="block2-overlay trans-0-4">
									<a href="#" class="block2-btn-addwishlist hov-pointer trans-0-4">
										<i class="icon-wishlist icon_heart_alt" aria-hidden="true"></i>
										<i class="icon-wishlist icon_heart dis-none" aria-hidden="true"></i>
									</a>

									<div class="block2-btn-addcart w-size1 trans-0-4">
										<!-- Button -->
										<button class="flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4">
											Add to Cart
										</button>
									</div>
								</div>
							</div>

							<div class="block2-txt p-t-20">
								<a href="product-detail.html" class="block2-name dis-block s-text3 p-b-5">
									Herschel supply co 25l
								</a>

								<span class="block2-price m-text6 p-r-5">
									₹75.00
								</span>
							</div>
						</div>
					</div>

					<div class="item-slick2 p-l-15 p-r-15" hidden="true">
						<!-- Block2 -->
						<div class="block2">
							<div class="block2-img wrap-pic-w of-hidden pos-relative">
								<img src="{% static 'frontend/images/item-03.webp' %}" alt="IMG-PRODUCT">

								<div class="block2-overlay trans-0-4">
									<a href="#" class="block2-btn-addwishlist hov-pointer trans-0-4">
										<i class="icon-wishlist icon_heart_alt" aria-hidden="true"></i>
										<i class="icon-wishlist icon_heart dis-none" aria-hidden="true"></i>
									</a>

									<div class="block2-btn-addcart w-size1 trans-0-4">
										<!-- Button -->
										<button class="flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4">
											Add to Cart
										</button>
									</div>
								</div>
							</div>

							<div class="block2-txt p-t-20">
								<a href="product-detail.html" class="block2-name dis-block s-text3 p-b-5">
									Denim jacket blue
								</a>

								<span class="block2-price m-text6 p-r-5">
									₹92.50
								</span>
							</div>
						</div>
					</div>

					<div class="item-slick2 p-l-15 p-r-15" hidden="true">
						<!-- Block2 -->
						<div class="block2">
							<div class="block2-img wrap-pic-w of-hidden pos-relative">
								<img src="{% static 'frontend/images/item-05.webp' %}" alt="IMG-PRODUCT">

								<div class="block2-overlay trans-0-4">
									<a href="#" class="block2-btn-addwishlist hov-pointer trans-0-4">
										<i class="icon-wishlist icon_heart_alt" aria-hidden="true"></i>
										<i class="icon-wishlist icon_heart dis-none" aria-hidden="true"></i>
									</a>

									<div class="block2-btn-addcart w-size1 trans-0-4">
										<!-- Button -->
										<button class="flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4">
											Add to Cart
										</button>
									</div>
								</div>
							</div>

							<div class="block2-txt p-t-20">
								<a href="product-detail.html" class="block2-name dis-block s-text3 p-b-5">
									Coach slim easton black
								</a>

								<span class="block2-price m-text6 p-r-5">
									₹165.90
								</span>
							</div>
						</div>
					</div>

					<div class="item-slick2 p-l-15 p-r-15" hidden="true">
						<!-- Block2 -->
						<div class="block2">
							<div class="block2-img wrap-pic-w of-hidden pos-relative block2-labelsale">
								<img src="{% static 'frontend/images/item-07.webp' %}" alt="IMG-PRODUCT">

								<div class="block2-overlay trans-0-4">
									<a href="#" class="block2-btn-addwishlist hov-pointer trans-0-4">
										<i class="icon-wishlist icon_heart_alt" aria-hidden="true"></i>
										<i class="icon-wishlist icon_heart dis-none" aria-hidden="true"></i>
									</a>

									<div class="block2-btn-addcart w-size1 trans-0-4">
										<!-- Button -->
										<button class="flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4">
											Add to Cart
										</button>
									</div>
								</div>
							</div>

							<div class="block2-txt p-t-20">
								<a href="product-detail.html" class="block2-name dis-block s-text3 p-b-5">
									Frayed denim shorts
								</a>

								<span class="block2-oldprice m-text7 p-r-5">
									₹29.50
								</span>

								<span class="block2-newprice m-text8 p-r-5">
									₹15.90
								</span>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</section>


	<!-- Footer -->
	<footer class="bg6 p-t-45 p-b-43 p-l-45 p-r-45"  hidden="true">
		<div class="flex-w p-b-90">
			<div class="w-size6 p-t-30 p-l-15 p-r-15 respon3">
				<h4 class="s-text12 p-b-30">
					GET IN TOUCH
				</h4>

				<div>
					<p class="s-text7 w-size27">
						Any questions? Let us know in store at 8th floor, 379 Hudson St, New York, NY 10018 or call us on (+1) 96 716 6879
					</p>

					<div class="flex-m p-t-30">
						<a href="#" class="fs-18 color1 p-r-20 fa fa-facebook"></a>
						<a href="#" class="fs-18 color1 p-r-20 fa fa-instagram"></a>
						<a href="#" class="fs-18 color1 p-r-20 fa fa-pinterest-p"></a>
						<a href="#" class="fs-18 color1 p-r-20 fa fa-snapchat-ghost"></a>
						<a href="#" class="fs-18 color1 p-r-20 fa fa-youtube-play"></a>
					</div>
				</div>
			</div>

			<div class="w-size7 p-t-30 p-l-15 p-r-15 respon4">
				<h4 class="s-text12 p-b-30">
					Categories
				</h4>

				<ul>
					<li class="p-b-9">
						<a href="#" class="s-text7">
							Men
						</a>
					</li>

					<li class="p-b-9">
						<a href="#" class="s-text7">
							Women
						</a>
					</li>

					<li class="p-b-9">
						<a href="#" class="s-text7">
							Dresses
						</a>
					</li>

					<li class="p-b-9">
						<a href="#" class="s-text7">
							Sunglasses
						</a>
					</li>
				</ul>
			</div>

			<div class="w-size7 p-t-30 p-l-15 p-r-15 respon4">
				<h4 class="s-text12 p-b-30">
					Links
				</h4>

				<ul>
					<li class="p-b-9">
						<a href="#" class="s-text7">
							Search
						</a>
					</li>

					<li class="p-b-9">
						<a href="#" class="s-text7">
							About Us
						</a>
					</li>

					<li class="p-b-9">
						<a href="#" class="s-text7">
							Contact Us
						</a>
					</li>

					<li class="p-b-9">
						<a href="#" class="s-text7">
							Returns
						</a>
					</li>
				</ul>
			</div>

			<div class="w-size7 p-t-30 p-l-15 p-r-15 respon4">
				<h4 class="s-text12 p-b-30">
					Help
				</h4>

				<ul>
					<li class="p-b-9">
						<a href="#" class="s-text7">
							Track Order
						</a>
					</li>

					<li class="p-b-9">
						<a href="#" class="s-text7">
							Returns
						</a>
					</li>

					<li class="p-b-9">
						<a href="#" class="s-text7">
							Shipping
						</a>
					</li>

					<li class="p-b-9">
						<a href="#" class="s-text7">
							FAQs
						</a>
					</li>
				</ul>
			</div>

			<div class="w-size8 p-t-30 p-l-15 p-r-15 respon3">
				<h4 class="s-text12 p-b-30">
					Newsletter
				</h4>

				<form>
					<div class="effect1 w-size9">
						<input class="s-text7 bg6 w-full p-b-5" type="text" name="email" placeholder="email@example.com">
						<span class="effect1-line"></span>
					</div>

					<div class="w-size2 p-t-20">
						<!-- Button -->
						<button class="flex-c-m size2 bg4 bo-rad-23 hov1 m-text3 trans-0-4">
							Subscribe
						</button>
					</div>

				</form>
			</div>
		</div>

		<div class="t-center p-l-15 p-r-15">
			<a href="#">
				<img class="h-size2" src="{% static 'frontend/images/icons/paypal.png' %}" alt="IMG-PAYPAL">
			</a>

			<a href="#">
				<img class="h-size2" src="{% static 'frontend/images/icons/visa.png' %}" alt="IMG-VISA">
			</a>

			<a href="#">
				<img class="h-size2" src="{% static 'frontend/images/icons/mastercard.png' %}" alt="IMG-MASTERCARD">
			</a>

			<a href="#">
				<img class="h-size2" src="{% static 'frontend/images/icons/express.png' %}" alt="IMG-EXPRESS">
			</a>

			<a href="#">
				<img class="h-size2" src="{% static 'frontend/images/icons/discover.png' %}" alt="IMG-DISCOVER">
			</a>

			<div class="t-center s-text8 p-t-20">
				Copyright © 2018 All rights reserved. | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
			</div>
		</div>
	</footer>



	<!-- Back to top -->
	<div class="btn-back-to-top bg0-hov" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="fa fa-angle-double-up" aria-hidden="true"></i>
		</span>
	</div>

	<!-- Container Selection -->
	<div id="dropDownSelect1"></div>
	<div id="dropDownSelect2"></div>

	{% endblock content %}




{% block extra_scripts %}
<script>
    function handleClick(url) {
        // Perform any additional logic you need
        console.log("Button clicked! URL: " + url);

        // You can redirect to the specified URL if needed
        window.location.href = url;
    }

    function redirectLogin() {
        window.location.href = "{% url 'frontend:auth0-login' %}";
    }

    // JavaScript code for handling AJAX requests and updating the DOM
    var reviewsUrl = "{% url 'frontend:reviews_ajax' %}";

    // Initial load of reviews
    $(document).ready(function () {
        loadReviews(1);
    });

    // Function to load reviews via AJAX
    function loadReviews(page) {
        $.ajax({
            type: 'GET',
            url: reviewsUrl,
            data: { page: page, per_page: 5, product_id: '{{object.id}}' },
            success: function (response) {
                // Assuming your response contains reviews and total_pages
                displayReviews(response.reviews);
                // Display pagination links
                displayPagination(response.total_reviews, response.total_pages, page);
            },
            error: function (error) {
                console.error('Error loading reviews:', error);
            }
        });
    }

    // Function to display reviews in the DOM
    function displayReviews(reviews) {
        var container = $('#reviews-content');
        container.empty(); // Clear existing reviews and pagination

        $.each(reviews, function (index, review) {
            // Build and append each review container
            var reviewContainer = '<div class="review-container">';
            reviewContainer += '<div class="user-info">' + review.user + '</div>';
            reviewContainer += '<div class="rating">' + getStars(review.rating) + '</div>';
            reviewContainer += '<div class="comment">' + review.comment + '</div>';
            reviewContainer += '</div>';

            container.append(reviewContainer);
        });

        // Append the pagination container after 10 reviews
        container.append('<div class="pagination" id="pagination-container"></div>');

        // Append the new rating and comment container inside the dropdown
        var rateProductContainer = '<div class="rate-product-container">' +
            '<h5 class="rate-header">Rate This Product</h5>' +
            '<div class="rating" id="star-rating-container">' +
            '<span class="fa fa-star" data-rating="0.5"></span>' +
            '<span class="fa fa-star" data-rating="1.0"></span>' +
            '<span class="fa fa-star" data-rating="1.5"></span>' +
            '<span class="fa fa-star" data-rating="2.0"></span>' +
            '<span class="fa fa-star" data-rating="2.5"></span>' +
            '<textarea class="comment-input" placeholder="Add your comment..." id="comment-input"></textarea>' +
            '<button class="btn btn-primary btn-sm" onclick="submitReview()">Submit Review</button>' +
            '</div>' +
            '</div>';
        container.append(rateProductContainer);

        // Initialize star rating events after adding elements to the DOM
        initializeStarRating();
    }

    // Function to display next and previous pagination links in the DOM
    function displayPagination(totalReviews, totalPages, currentPage) {

        // Display the total number of reviews in the header
        var reviewsCount = $('#reviews-count');
        reviewsCount.text('Reviews (' + totalReviews + ')');

        var paginationContainer = $('#pagination-container');
        paginationContainer.empty(); // Clear existing pagination

        // Previous button
        var prevLinkClass = (currentPage > 1) ? 'btn btn-primary btn-sm pagination-link' : 'btn btn-primary btn-sm pagination-link d-none';
        var prevPaginationLink = $('<button class="' + prevLinkClass + '" onclick="loadReviews(' + (currentPage - 1) + ')">Previous</button>');
        paginationContainer.append(prevPaginationLink);

        // Next button with left padding for spacing
        var nextLinkClass = (currentPage < totalPages) ? 'btn btn-primary btn-sm pagination-link ml-2' : 'btn btn-primary btn-sm pagination-link d-none';
        var nextPaginationLink = $('<button class="' + nextLinkClass + '" onclick="loadReviews(' + (currentPage + 1) + ')">Next</button>');
        paginationContainer.append(nextPaginationLink);
    }

   // Function to generate star icons based on the rating
function getStars(rating) {
    // Adjust based on your rating system
    console.log("RATING ", rating);
    var stars = '';
    var roundedRating = Math.floor(rating); // Round down to the nearest whole number

    for (var i = 1; i <= 5; i++) {
        var iconClass = (i <= roundedRating) ? 'fa-star checked' : 'fa-star';
        
        // If the rating has a decimal part, consider adding a half star
        if (i === roundedRating + 1 && rating % 1 !== 0) {
            iconClass = 'fa-star-half checked';
        }

        stars += '<span class="fa ' + iconClass + '"></span>';
    }
    return stars;
}


    // Function to initialize star rating events
    function initializeStarRating() {
        $('#star-rating-container .fa-star').hover(
            function () {
                // Hover in
                $(this).addClass('checked').prevAll().addClass('checked');
            },
            function () {
                // Hover out
                $(this).removeClass('checked').prevAll().removeClass('checked');
            }
        );

        $('#star-rating-container .fa-star').click(function () {
            // Set the selected rating
            $(this).addClass('checked').prevAll().addClass('checked');
            $(this).nextAll().removeClass('checked');

            // Update the hidden input or perform any other actions as needed
            var selectedRating = $(this).data('rating');
            console.log('Selected Rating:', selectedRating);
        });
    }

    // Function to submit a new review via AJAX
    function submitReview() {
        var rating = $('#star-rating-container .fa-star.checked').length; // Adjust based on your rating system
        var comment = $('#comment-input').val();

        $.ajax({
            type: 'POST',
            url: reviewsUrl,
            data: { rating: rating, comment: comment },
            success: function (response) {
                // Handle success, maybe refresh the reviews
                loadReviews(1); // Reload the first page after submitting a new review
            },
            error: function (error) {
                console.error('Error submitting review:', error);
            }
        });
    }
</script>

{% endblock extra_scripts %}